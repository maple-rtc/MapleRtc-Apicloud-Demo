<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>title</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../css/style.css" />
    <style>
        .swipe {overflow: hidden;position: relative;}
        .swipe-wrap {overflow: hidden; position: relative;}
        .swipe-wrap .swipe-con { float:left; position: relative;}
        .swipe-wrap .swipe-con img{ width:100%; vertical-align: middle;  }
        #main{ padding: 2px; background-color: #e5e5e5;  }
        #main .flex-vertical .layout{ background:#e66961 url() right bottom no-repeat; margin: .3rem;  padding: .3rem; background-size: auto 50%; line-height: 2rem;  color: white; font-size: 1.8rem; }
        #main .flex-vertical .layout p{ font-size: 1rem; }
        #main .flex-vertical .layout.ic-hot{ background-image: url(../image/ic-hot.png); }
        #main .flex-vertical .layout.ic-article{ background-image: url(../image/ic-article.png); background-color: #6ab494; }
        #main .flex-vertical .layout.ic-tag{ background-image: url(../image/ic-tag.png); background-color: #9e9a8d; font-size: 1.6rem;}
        #main .flex-vertical .layout.ic-coffee{ background-image: url(../image/ic-coffee.png); background-color: #ebd275;  font-size: 1.6rem;}
        #main .flex-vertical .layout.ic-shop{ background-image: url(../image/ic-shop.png); background-color: #6ab494; }
        #main .flex-vertical .layout.ic-like{ background-image: url(../image/ic-like.png); background-color: #d8c09d; font-size: 1.6rem;}
        #main .flex-vertical .layout.ic-lable{ background-image: url(../image/ic-lable.png); font-size: 1.2rem;}
        #main .flex-vertical .layout.ic-more{ background-image: url(../image/ic-more.png); background-color: #ebd275; font-size: 1.2rem; background-size:
         50% auto; background-position: center right; }
        .flex-2{ -webkit-box-flex: 2;     -webkit-flex: 2;    flex: 2; }
        .hover{ opacity: .8; }
    </style>
</head>
<body>
    <div id="wrap" class="flex-wrap flex-vertical" >
        <div  class='swipe'>
            <div class='swipe-wrap'>
                <div class="swipe-con">
                    <img src="../image/api_100.png" alt="">
                </div>
                <div class="swipe-con">
                    <img src="../image/api_100.png" alt="">
                </div>
                <div class="swipe-con">
                    <img src="../image/api_100.png" alt="">
                </div>
                <div class="swipe-con">
                    <img src="../image/api_100.png" alt="">
                </div>
                <div class="swipe-con">
                    <img src="../image/api_100.png" alt="">
                </div>
            </div>
        </div>
        <div id="main" class="flex-wrap flex-con" >
             <div class="flex-con flex-wrap flex-vertical">
                 <div tapmode="hover" onclick="inputRoomInfo(this, 1 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                        <h6>点击登录</h6>
                        <h7>多人语音房间</h7>
                        <p>简介:蓝蘑云apicloud音视频演示程序，随意输入相同房间号，不同用户ID。</p>
                     </div>
                 </div>
                 <div tapmode="hover" onclick="inputRoomInfo(this, 2 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                        <h6>点击登录</h6>
                        <h7>1对1视频房间</h7>
                        <p>简介:蓝蘑云apicloud音视频演示程序，随意输入相同房间号，不同用户ID。</p>
                     </div>
                 </div>
                 <div tapmode="hover" onclick="inputRoomInfo(this, 3 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                        <h6>点击登录</h6>
                        <h7>多人视频房间</h7>
                        <p>简介:蓝蘑云apicloud音视频演示程序，随意输入相同房间号，不同用户ID。</p>
                     </div>
                 </div>
                 <div tapmode="hover" onclick="inputRoomInfo(this, 4 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                        <h6>点击登录</h6>
                        <h7>直播视频推流</h7>
                        <p>简介:蓝蘑云apicloud音视频演示程序,随意输入相同房间号，不同用户ID.</p>
                     </div>
                 </div>
                 <div tapmode="hover" onclick="inputRoomInfo(this, 5 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                        <h6>点击登录</h6>
                        <h7>直播视频播放</h7>
                        <p>简介:蓝蘑云apicloud音视频演示程序,随意输入相同房间号，不同用户ID.</p>
                     </div>
                 </div>
                 <div tapmode="hover" onclick="inputRoomInfo(this, 6 );" class="flex-wrap flex-con flex-2 layout-wrap">
                     <div class="flex-con layout ic-hot">
                         <h6>点击登录</h6>
                         <h7>屏幕分享</h7>
                         <p>简介:蓝蘑云apicloud音视频演示程序，随意输入相同房间号，不同用户ID。</p>
                     </div>
                 </div>
             </div>
        </div>
    </div>
</body>
</html>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript" src="../script/swipe.js"></script>
<script type="text/javascript">

var session;

session = {
    channelId: "1234",
    userId: "nick",
};

var inputRoomInfo = function(tag, index) {
    api.prompt(
        {
            title: '输入房间号',
            buttons: ['确定', '取消']
        },function( ret, err ){
            var channelId = ret.text;
            if (ret.buttonIndex != 1)
            {
                return;
            }
            if(channelId.length < 1){
                api.toast({msg:JSON.stringify("房间号不能为空!")});
                return;
            }
            api.prompt(
                {
                    title: '输入用户ID',
                    buttons: ['确定', '取消']
                },function( ret, err )
                {
                    if (ret.buttonIndex != 1)
                    {
                        return;
                    }
                    var userId = ret.text;
                    if(userId.length < 1)
                    {
                        api.toast({msg:JSON.stringify("用户ID不能为空!")});
                        return;
                    }
                    
                    switch(index) {
                        case 1:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:true
                            };
                            
                            api.openWin({
                                name: 'videomeeting',
                                url: './win_voicemeeting.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });
                            
                            break;
                        }
                        case 2:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:true
                            };
                            
                            api.openWin({
                                name: 'videomeeting',
                                url: './win_videomeeting1v1.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });
                            
                            break;
                        }
                        case 3:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:true
                            };
                            api.openWin({
                                name: 'videomeeting',
                                url: './win_videomeeting.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });
                            
                            break;
                        }
                        case 4:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:true
                            };
                            
                            api.openWin({
                                name: 'videolive',
                                url: './win_videolive.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });
                            
                            break;
                        }
                        case 5:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:false
                            };
                            api.openWin({
                                name: 'videolive',
                                url: './win_videoplay.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });
                            
                            break;
                        }
                        case 6:
                        {
                            session = {
                                channelId: channelId,
                                userId: userId,
                                enableMic:true
                            };

                            api.openWin({
                                name: 'screenshare',
                                url: './win_screenshare.html',
                                pageParam: {
                                    index: index,
                                    name: tag.querySelector('h7').innerHTML,
                                    session:session
                                }
                            });

                            break;
                        }
                    }
                    
                });
        });
}

var mySwipe = new Swipe($api.dom('.swipe'), {
        speed: 400,
        auto: 3000,
        continuous: true,
        disableScroll: false,
        stopPropagation: false,
        transitionEnd: function(index, elem) {

        }
    });
</script>
